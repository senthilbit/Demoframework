'use strict';(function(e){(e.SEFAgent=e.SEFAgent||{}).observerManager=function(){class e{constructor(a,b){this.invoke=this.listener=a;this.manager=b;this.rules={parent:{include:new Set,exclude:new Set},node:{include:new Set,exclude:new Set}}}Start(a=!1){this.invoke=!0===a?(...b)=>{setTimeout(this.listener,0,...b)}:this.listener;this.manager.observers.add(this);return this}Stop(){this.manager.observers.delete(this);return this}Rules(a){a&&["parent","node"].forEach(b=>{a[b]&&["include","exclude"].forEach(d=>
{a[b][d]&&Array.isArray(a[b][d])&&(this.rules[b][d].clear(),a[b][d].forEach(a=>this.rules[b][d].add(a)))})});return this}}class f{constructor(){this.observers=new Set;this.rootObserver=new MutationObserver(a=>{a.forEach(b=>{b.addedNodes.forEach(a=>{this.observers.forEach(c=>{try{c.rules.parent.exclude.has(b.target.nodeName)||c.rules.node.exclude.has(a.nodeName)||0<c.rules.parent.include.size&&!c.rules.parent.include.has(b.target.nodeName)||0<c.rules.node.include.size&&!c.rules.node.include.has(a.nodeName)||
c.invoke(a,b)}catch(g){console.error(`Error while calling observer: ${g}`)}})})})});this.rootObserver.observe(document,{attributes:!1,childList:!0,subtree:!0,characterData:!0})}CreateObserver(a,b=null){if("function"!==typeof a)throw Error("listener must be callable");return(new e(a,this)).Rules(b)}}return new f}()})(this);
