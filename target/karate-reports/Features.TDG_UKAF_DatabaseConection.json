[{"line":1,"elements":[{"start_timestamp":"2024-02-26T08:33:32.092Z","line":5,"name":"","description":"","id":"","type":"scenario","keyword":"Scenario","steps":[{"result":{"duration":218800,"status":"passed"},"comments":["# use jdbc to validate"],"line":8,"name":"def config = { username: 'sql12343737', password: 'tZWFWH628v', url: 'jdbc:mysql:\/\/sql12.freemysqlhosting.net:3306\/sql12343737', driverClassName: 'com.mysql.cj.jdbc.Driver' }","match":{"location":"karate","arguments":[]},"keyword":"*","doc_string":{"content_type":"","value":"14:03:32.092 The value of env is :  null \n","line":8}},{"name":"def DbUtils = Java.type('Utils.External.DbUtils')","result":{"duration":1526500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"def db = new DbUtils(config)","result":{"duration":95427200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10},{"result":{"duration":22707709000,"error_message":"js failed:\n>>>>\n01: db.readRows('Select * from office')\n<<<<\norg.graalvm.polyglot.PolyglotException: Failed to obtain JDBC Connection; nested exception is com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n- org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)\n- org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:376)\n- org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:465)\n- org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:475)\n- org.springframework.jdbc.core.JdbcTemplate.queryForList(JdbcTemplate.java:525)\n- Utils.External.DbUtils.readRows(DbUtils.java:46)\n- <js>.:program(Unnamed:1)\n\nclasspath:Features\/TDG_UKAF_DatabaseConection.feature:14","status":"failed"},"comments":["# since the DbUtils returns a Java List (of Map-s), it becomes normal JSON here !","# which means that you can use the full power of Karate's 'match' syntax"],"line":14,"name":"def empolyees = db.readRows('Select * from office')","match":{"location":"karate","arguments":[]},"keyword":"*","doc_string":{"content_type":"","value":"14:03:54.898 classpath:Features\/TDG_UKAF_DatabaseConection.feature:14\n* def empolyees = db.readRows('Select * from office')\njs failed:\n>>>>\n01: db.readRows('Select * from office')\n<<<<\norg.graalvm.polyglot.PolyglotException: Failed to obtain JDBC Connection; nested exception is com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n- org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:83)\n- org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:376)\n- org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:465)\n- org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:475)\n- org.springframework.jdbc.core.JdbcTemplate.queryForList(JdbcTemplate.java:525)\n- Utils.External.DbUtils.readRows(DbUtils.java:46)\n- <js>.:program(Unnamed:1)\n\nclasspath:Features\/TDG_UKAF_DatabaseConection.feature:14\n","line":14}},{"name":"print empolyees","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":15},{"name":"def dogs = db.readRows('SELECT * FROM DOGS')","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":17},{"name":"match dogs contains { ID: '#(id)', NAME: 'Scooby' }","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":18},{"name":"def dog = db.readRow('SELECT * FROM DOGS D WHERE D.ID = ' + id)","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":20},{"name":"match dog.NAME == 'Scooby'","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":21},{"name":"def test = db.readValue('SELECT ID FROM DOGS D WHERE D.ID = ' + id)","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":23},{"name":"match test == id","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":24}],"tags":[]}],"name":"Features\/TDG_UKAF_DatabaseConection.feature","description":"dogs end-point that uses jdbc as part of the test","id":"dogs-end-point-that-uses-jdbc-as-part-of-the-test","keyword":"Feature","uri":"Features\/TDG_UKAF_DatabaseConection.feature"}]